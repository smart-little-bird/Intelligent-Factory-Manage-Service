var j=Object.defineProperty;var w=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var k=(s,a,u)=>a in s?j(s,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[a]=u,h=(s,a)=>{for(var u in a||(a={}))q.call(a,u)&&k(s,u,a[u]);if(w)for(var u of w(a))O.call(a,u)&&k(s,u,a[u]);return s};var A=(s,a,u)=>new Promise((m,v)=>{var C=n=>{try{p(u.next(n))}catch(c){v(c)}},i=n=>{try{p(u.throw(n))}catch(c){v(c)}},p=n=>n.done?m(n.value):Promise.resolve(n.value).then(C,i);p((u=u.apply(s,a)).next())});import{d as V,f as $,g as Z,u as G,eZ as H,ae as J,r as g,b as K,c0 as Q,c2 as W,o as X,c as Y,i as e,w as t,c4 as ee,h as y,j as f,cF as te,k as ue,_ as oe,m as ae,ca as le,N as ne,l as se,c6 as re,c7 as ie,cb as ce}from"./index.ff5a668a.js";import{_ as de}from"./product-item-form.vue_vue_type_script_setup_true_lang.572eee48.js";import{productItemColumns as pe}from"./datas.37ea28d8.js";import{B as me}from"./TableAction.vue_vue_type_script_lang.45bb6f38.js";import{T as _e}from"./TableAction.0a130fa4.js";import{g as fe,u as ve,c as Ce}from"./index.40748538.js";import{P as Fe}from"./PlusOutlined.d74d8d2e.js";import"./vuedraggable.umd.d505abd4.js";import"./useDesignSetting.1ba28d32.js";import"./SettingOutlined.1dc92e20.js";import"./propTypes.54b06ce7.js";import"./FormOutlined.06bd75c8.js";import"./ReloadOutlined.9860cd6e.js";import"./componentSetting.e6bd74f7.js";import"./index.ae498cec.js";import"./DownOutlined.67d87310.js";const ze=V({__name:"create",setup(s){const a=$(),u=Z(),m=G(),v=H(),C=u.query.productId,i=J(()=>C!==void 0),p=g(),n=g(!1),c=g({}),x={description:{required:!0,trigger:["blur","input"],message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u63CF\u8FF0"},entryCriteria:{required:!0,trigger:["blur","input"],message:"\u8BF7\u8F93\u5165\u5165\u7EA7\u63CF\u8FF0"}},T=K({width:200,title:"\u64CD\u4F5C",key:"action",fixed:"right",align:"center",render(d){return console.log(d),Q(_e,{style:"button",actions:[{label:"\u5220\u9664",onClick:()=>{o.value.productListItemDtos=o.value.productListItemDtos.filter(l=>l.id!=d.id)},ifShow:!0}]})}});let F={id:null,description:null,entryCriteria:null,productListItemDtos:[]};const o=g(h({},F)),L=()=>{console.log("\u70B9\u51FB\u4E86\u8FD4\u56DE\u4EA7\u54C1\u5217\u8868\u9875"),a.push({name:"product-list"})},P=()=>{n.value=!0,c.value={}},N=()=>{n.value=!1},R=()=>{o.value.productListItemDtos.push(c.value),n.value=!1},z=d=>{d.preventDefault(),n.value=!1,p.value.validate(l=>A(this,null,function*(){if(l)m.error("\u64CD\u4F5C\u5931\u8D25");else{if(!o.value.productListItemDtos||o.value.productListItemDtos.length<1){m.error("\u8BF7\u6DFB\u52A0\u4EA7\u54C1\u9879");return}v.info({title:"\u63D0\u793A",content:"\u786E\u8BA4\u63D0\u4EA4\u5417?",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:()=>A(this,null,function*(){i.value?yield ve(o.value):yield Ce(o.value),m.success(i.value?"\u7F16\u8F91\u6210\u529F":"\u65B0\u5EFA\u6210\u529F"),setTimeout(()=>{a.push({name:"product-list"})},2e3)}),onNegativeClick:()=>{}})}}))};return W(()=>{fe().then(d=>{var l;F=(l=d.filter(b=>b.id==C)[0])!=null?l:F,o.value=h({},F),console.log(o.value)})}),(d,l)=>{const b=te,D=ue,I=oe,M=ae,E=le,S=ne,_=se,B=re,U=ie;return X(),Y("div",null,[e(E,{bordered:!1,class:"mt-4 proCard",size:"small",segmented:{content:!0}},{default:t(()=>[e(M,{model:o.value,ref_key:"productFormRef",ref:p,"label-placement":"left","label-width":"auto",inline:"",rules:x,class:"py-4"},{default:t(()=>[ee(e(D,{label:"\u5BA2\u6237Id",path:"id",hidden:""},{default:t(()=>[e(b,{clearable:"",disabled:i.value,placeholder:"\u5BA2\u6237Id",readonly:"",value:o.value.id,"onUpdate:value":l[0]||(l[0]=r=>o.value.id=r),hidden:""},null,8,["disabled","value"])]),_:1},512),[[ce,!1]]),e(D,{label:"\u4EA7\u54C1\u63CF\u8FF0",path:"description"},{default:t(()=>[e(I,{disabled:i.value,clearable:"",placeholder:"\u4EA7\u54C1\u63CF\u8FF0",value:o.value.description,"onUpdate:value":l[1]||(l[1]=r=>o.value.description=r)},null,8,["disabled","value"])]),_:1}),e(D,{label:"\u5165\u7EA7\u63CF\u8FF0",path:"entryCriteria"},{default:t(()=>[e(I,{disabled:i.value,clearable:"",placeholder:"\u5165\u7EA7\u63CF\u8FF0",value:o.value.entryCriteria,"onUpdate:value":l[2]||(l[2]=r=>o.value.entryCriteria=r)},null,8,["disabled","value"])]),_:1})]),_:1},8,["model"])]),_:1}),e(E,{bordered:!1,class:"mt-4 proCard",size:"small",segmented:{content:!0}},{default:t(()=>[e(y(me),{columns:y(pe),"row-key":r=>r.id,ref:"actionRef",dataSource:o.value.productListItemDtos,actionColumn:T,"scroll-x":1090,pagination:!1,showToolBar:!1},{tableTitle:t(()=>[e(_,{type:"primary",onClick:P},{icon:t(()=>[e(S,null,{default:t(()=>[e(y(Fe))]),_:1})]),default:t(()=>[f(" \u6DFB\u52A0\u4EA7\u54C1\u660E\u7EC6 ")]),_:1})]),_:1},8,["columns","row-key","dataSource","actionColumn"])]),_:1}),e(U,{show:n.value,"onUpdate:show":l[3]||(l[3]=r=>n.value=r),"show-icon":!1,preset:"card",size:"huge",style:{width:"800px"},title:"\u65B0\u5EFA\u4EA7\u54C1\u660E\u7EC6"},{footer:t(()=>[e(B,{justify:"center"},{default:t(()=>[e(_,{onClick:N},{default:t(()=>[f("\u53D6\u6D88")]),_:1}),e(_,{type:"info",onClick:R},{default:t(()=>[f("\u786E\u5B9A")]),_:1})]),_:1})]),default:t(()=>[e(de,{item:c.value},null,8,["item"])]),_:1},8,["show"]),e(E,{bordered:!1,class:"mt-4 proCard",size:"small",segmented:{content:!0}},{default:t(()=>[e(B,{justify:"center"},{default:t(()=>[e(_,{type:"default",onClick:L},{default:t(()=>[f(" \u8FD4\u56DE ")]),_:1}),e(_,{type:"success",onClick:z},{default:t(()=>[f(" \u63D0\u4EA4 ")]),_:1})]),_:1})]),_:1})])}}});export{ze as default};
